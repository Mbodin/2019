/*global window */
/**
 * @license countdown.js v2.6.0 http://countdownjs.org
 * Copyright (c)2006-2014 Stephen M. McKamey.
 * Licensed under The MIT License.
 */
/*jshint bitwise:false */
/**
 * @public
 * @type {Object|null}
 */
var module,countdown=function(e){"use strict";var s=1,n=2,t=4,i=8,r=16,o=32,a=64,u=128,d=256,l=512,c=1024,m=u|a|r|i|t|n,h=1e3,f=60,y=60,p=24,g=p*y*f*h,w=7,M=12,v=10,N=10,D=10,S=Math.ceil,k=Math.floor;function T(e,s){var n=e.getTime();return e.setMonth(e.getMonth()+s),Math.round((e.getTime()-n)/g)}function F(e){var s=e.getTime(),n=new Date(s);return n.setMonth(e.getMonth()+1),Math.round((n.getTime()-s)/g)}function E(e,s){if(s=s instanceof Date||null!==s&&isFinite(s)?new Date(+s):new Date,!e)return s;var n=+e.value||0;return n?(s.setTime(s.getTime()+n),s):((n=+e.milliseconds||0)&&s.setMilliseconds(s.getMilliseconds()+n),(n=+e.seconds||0)&&s.setSeconds(s.getSeconds()+n),(n=+e.minutes||0)&&s.setMinutes(s.getMinutes()+n),(n=+e.hours||0)&&s.setHours(s.getHours()+n),(n=+e.weeks||0)&&(n*=w),(n+=+e.days||0)&&s.setDate(s.getDate()+n),(n=+e.months||0)&&s.setMonth(s.getMonth()+n),(n=+e.millennia||0)&&(n*=D),(n+=+e.centuries||0)&&(n*=N),(n+=+e.decades||0)&&(n*=v),(n+=+e.years||0)&&s.setFullYear(s.getFullYear()+n),s)}var L,Y,b,H,I,A,j,C;function O(e,s){return j(e)+(1===e?L[s]:Y[s])}function U(){}function x(e,s,n,t,i,r){return e[n]>=0&&(s+=e[n],delete e[n]),(s/=i)+1<=1?0:e[t]>=0?(e[t]=+(e[t]+s).toFixed(r),function(e,s){switch(s){case"seconds":if(e.seconds!==f||isNaN(e.minutes))return;e.minutes++,e.seconds=0;case"minutes":if(e.minutes!==y||isNaN(e.hours))return;e.hours++,e.minutes=0;case"hours":if(e.hours!==p||isNaN(e.days))return;e.days++,e.hours=0;case"days":if(e.days!==w||isNaN(e.weeks))return;e.weeks++,e.days=0;case"weeks":if(e.weeks!==F(e.refMonth)/w||isNaN(e.months))return;e.months++,e.weeks=0;case"months":if(e.months!==M||isNaN(e.years))return;e.years++,e.months=0;case"years":if(e.years!==v||isNaN(e.decades))return;e.decades++,e.years=0;case"decades":if(e.decades!==N||isNaN(e.centuries))return;e.centuries++,e.decades=0;case"centuries":if(e.centuries!==D||isNaN(e.millennia))return;e.millennia++,e.centuries=0}}(e,t),0):s}function R(e,s){var n,t,i,r=x(e,0,"milliseconds","seconds",h,s);if(r&&((r=x(e,r,"seconds","minutes",f,s))&&(r=x(e,r,"minutes","hours",y,s))&&(r=x(e,r,"hours","days",p,s))&&(r=x(e,r,"days","weeks",w,s))&&(r=x(e,r,"weeks","months",F(e.refMonth)/w,s))&&(r=x(e,r,"months","years",(n=e.refMonth,t=n.getTime(),(i=new Date(t)).setFullYear(n.getFullYear()+1),Math.round((i.getTime()-t)/g)/F(e.refMonth)),s))&&(r=x(e,r,"years","decades",v,s))&&(r=x(e,r,"decades","centuries",N,s))&&(r=x(e,r,"centuries","millennia",D,s))))throw new Error("Fractional unit overflow")}function K(e,m,g,F,E,L){var Y,b,H,I,A,j=new Date;if(e.start=m=m||j,e.end=g=g||j,e.units=F,e.value=g.getTime()-m.getTime(),e.value<0){var C=g;g=m,m=C}e.refMonth=new Date(m.getFullYear(),m.getMonth(),15,12,0,0);try{e.millennia=0,e.centuries=0,e.decades=0,e.years=g.getFullYear()-m.getFullYear(),e.months=g.getMonth()-m.getMonth(),e.weeks=0,e.days=g.getDate()-m.getDate(),e.hours=g.getHours()-m.getHours(),e.minutes=g.getMinutes()-m.getMinutes(),e.seconds=g.getSeconds()-m.getSeconds(),e.milliseconds=g.getMilliseconds()-m.getMilliseconds(),function(e){var s;for(e.milliseconds<0?(s=S(-e.milliseconds/h),e.seconds-=s,e.milliseconds+=s*h):e.milliseconds>=h&&(e.seconds+=k(e.milliseconds/h),e.milliseconds%=h),e.seconds<0?(s=S(-e.seconds/f),e.minutes-=s,e.seconds+=s*f):e.seconds>=f&&(e.minutes+=k(e.seconds/f),e.seconds%=f),e.minutes<0?(s=S(-e.minutes/y),e.hours-=s,e.minutes+=s*y):e.minutes>=y&&(e.hours+=k(e.minutes/y),e.minutes%=y),e.hours<0?(s=S(-e.hours/p),e.days-=s,e.hours+=s*p):e.hours>=p&&(e.days+=k(e.hours/p),e.hours%=p);e.days<0;)e.months--,e.days+=T(e.refMonth,1);e.days>=w&&(e.weeks+=k(e.days/w),e.days%=w),e.months<0?(s=S(-e.months/M),e.years-=s,e.months+=s*M):e.months>=M&&(e.years+=k(e.months/M),e.months%=M),e.years>=v&&(e.decades+=k(e.years/v),e.years%=v,e.decades>=N&&(e.centuries+=k(e.decades/N),e.decades%=N,e.centuries>=D&&(e.millennia+=k(e.centuries/D),e.centuries%=D)))}(e),Y=e,H=E,I=L,A=0,!((b=F)&c)||A>=H?(Y.centuries+=Y.millennia*D,delete Y.millennia):Y.millennia&&A++,!(b&l)||A>=H?(Y.decades+=Y.centuries*N,delete Y.centuries):Y.centuries&&A++,!(b&d)||A>=H?(Y.years+=Y.decades*v,delete Y.decades):Y.decades&&A++,!(b&u)||A>=H?(Y.months+=Y.years*M,delete Y.years):Y.years&&A++,!(b&a)||A>=H?(Y.months&&(Y.days+=T(Y.refMonth,Y.months)),delete Y.months,Y.days>=w&&(Y.weeks+=k(Y.days/w),Y.days%=w)):Y.months&&A++,!(b&o)||A>=H?(Y.days+=Y.weeks*w,delete Y.weeks):Y.weeks&&A++,!(b&r)||A>=H?(Y.hours+=Y.days*p,delete Y.days):Y.days&&A++,!(b&i)||A>=H?(Y.minutes+=Y.hours*y,delete Y.hours):Y.hours&&A++,!(b&t)||A>=H?(Y.seconds+=Y.minutes*f,delete Y.minutes):Y.minutes&&A++,!(b&n)||A>=H?(Y.milliseconds+=Y.seconds*h,delete Y.seconds):Y.seconds&&A++,b&s&&!(A>=H)||R(Y,I)}finally{delete e.refMonth}return e}function W(e,o,a,u,d){var l;a=+a||m,u=u>0?u:NaN,d=d>0?d<20?Math.round(d):20:0;var c=null;"function"==typeof e?(l=e,e=null):e instanceof Date||(null!==e&&isFinite(e)?e=new Date(+e):("object"==typeof c&&(c=e),e=null));var g=null;if("function"==typeof o?(l=o,o=null):o instanceof Date||(null!==o&&isFinite(o)?o=new Date(+o):("object"==typeof o&&(g=o),o=null)),c&&(e=E(c,o)),g&&(o=E(g,e)),!e&&!o)return new U;if(!l)return K(new U,e,o,a,u,d);var M,v,N=(v=a)&s?h/30:v&n?h:v&t?h*f:v&i?h*f*y:v&r?h*f*y*p:h*f*y*p*w,D=function(){l(K(new U,e,o,a,u,d),M)};return D(),M=setInterval(D,N)}U.prototype.toString=function(e){var s=C(this),n=s.length;if(!n)return e?""+e:I;if(1===n)return s[0];var t=b+s.pop();return s.join(H)+t},U.prototype.toHTML=function(e,s){e=e||"span";var n=C(this),t=n.length;if(!t)return(s=s||I)?"<"+e+">"+s+"</"+e+">":s;for(var i=0;i<t;i++)n[i]="<"+e+">"+n[i]+"</"+e+">";if(1===t)return n[0];var r=b+n.pop();return n.join(H)+r},U.prototype.addTo=function(e){return E(this,e)},C=function(e){var s=[],n=e.millennia;return n&&s.push(A(n,10)),(n=e.centuries)&&s.push(A(n,9)),(n=e.decades)&&s.push(A(n,8)),(n=e.years)&&s.push(A(n,7)),(n=e.months)&&s.push(A(n,6)),(n=e.weeks)&&s.push(A(n,5)),(n=e.days)&&s.push(A(n,4)),(n=e.hours)&&s.push(A(n,3)),(n=e.minutes)&&s.push(A(n,2)),(n=e.seconds)&&s.push(A(n,1)),(n=e.milliseconds)&&s.push(A(n,0)),s},W.MILLISECONDS=s,W.SECONDS=n,W.MINUTES=t,W.HOURS=i,W.DAYS=r,W.WEEKS=o,W.MONTHS=a,W.YEARS=u,W.DECADES=d,W.CENTURIES=l,W.MILLENNIA=c,W.DEFAULTS=m,W.ALL=c|l|d|u|a|o|r|i|t|n|s;var q=W.setFormat=function(e){if(e){if("singular"in e||"plural"in e){var s=e.singular||[];s.split&&(s=s.split("|"));var n=e.plural||[];n.split&&(n=n.split("|"));for(var t=0;t<=10;t++)L[t]=s[t]||L[t],Y[t]=n[t]||Y[t]}"string"==typeof e.last&&(b=e.last),"string"==typeof e.delim&&(H=e.delim),"string"==typeof e.empty&&(I=e.empty),"function"==typeof e.formatNumber&&(j=e.formatNumber),"function"==typeof e.formatter&&(A=e.formatter)}},z=W.resetFormat=function(){L=" millisecond| second| minute| hour| day| week| month| year| decade| century| millennium".split("|"),Y=" milliseconds| seconds| minutes| hours| days| weeks| months| years| decades| centuries| millennia".split("|"),b=" and ",H=", ",I="",j=function(e){return e},A=O};return W.setLabels=function(e,s,n,t,i,r,o){q({singular:e,plural:s,last:n,delim:t,empty:i,formatNumber:r,formatter:o})},W.resetLabels=z,z(),e&&e.exports?e.exports=W:"function"==typeof window.define&&void 0!==window.define.amd&&window.define("countdown",[],function(){return W}),W}(module);